!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.logmatic=b()}(this,function(){function a(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function b(a){a&&(i=a),console&&[{f:"log",l:"info"},{f:"info"},{f:"trace"},{f:"warn"},{f:"error"}].forEach(function(a){var b=a.f,c=a.l||a.f,d=console[b];console[b]=function(){var a=null;i&&(a={},a[i]=c);var b=Array.prototype.slice.call(arguments).map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");r(b,a),d.apply?d.apply(console,arguments):d(b)}})}function c(a){if(a){var b=window.onerror;window.onerror=function(c,d,e,f){var g={};g[a]={type:"JSException",url:d,line:e,col:f},i&&(g[i]="error"),r(c,g),b&&"function"==typeof b&&b.apply(window,arguments)}}}var d,e,f,g,h,i="severity",j=500,k=10,l=-1,m=null,n=!1,o=null,p=function(a){d="https://api.logmatic.io/v1/input/"+a},q=function(a){a=a||{},null!=a.lingerMs&&(j=a.lingerMs),null!=a.maxPostCount&&(k=a.maxPostCount),null!=a.maxWaitingCount&&(l=a.maxWaitingCount)},r=function(b,c){if(!d)return void console.error("Please init Logmatic before pushing events");var e={message:b};i&&(e[i]="info"),a(c,e),s(e)},s=function(b){a(e,b),h&&(b[h]=window.location.href),m=m||[],m.push(JSON.stringify(b)),l>=0&&m.length>l&&m.shift(),t(!0)},t=function(a){!n&&!o&&m&&m.length&&(a&&j>=0?o=setTimeout(u,j):u())},u=function(){var a;k>0&&m.length>k?a="["+m.splice(0,k).join(",")+"]":(a=m.length>1?"["+m.join(",")+"]":m[0],m=null),o=null,n=!0;var b;"undefined"!=typeof XDomainRequest&&(b=new XDomainRequest),b=new XMLHttpRequest,b.open("POST",d,!0),b.constructor===XMLHttpRequest&&(b.setRequestHeader("Content-Type","application/json; charset=UTF-8"),f&&b.setRequestHeader("X-Logmatic-Add-IP",f),g&&b.setRequestHeader("X-Logmatic-Add-UserAgent",g)),b.onload=function(){n=!1,t(!1)},b.onerror=function(){n=!1,t(!1)},b.send(a)},v=function(a){e=a},w=function(a){h=a},x=function(a){f=a},y=function(a){g=a};return{init:p,log:r,setMetas:v,setSendConsoleErrors:c,setSendConsoleLogs:b,setIPTracking:x,setUserAgentTracking:y,setURLTracking:w,setBulkOptions:q}});
//# sourceMappingURL=logmatic.min.js.map