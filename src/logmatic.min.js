!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.logmatic=b()}(this,function(){function a(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function b(a){a&&(i=a),console&&[{f:"log",l:"info"},{f:"info"},{f:"trace"},{f:"warn"},{f:"error"}].forEach(function(a){var b=a.f,c=a.l||a.f,d=console[b];console[b]=function(){var a=null;i&&(a={},a[i]=c);var b=Array.prototype.slice.call(arguments).map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");t(b,a),d.apply?d.apply(console,arguments):d(b)}})}function c(a){if(a){var b=window.TraceKit;if(b)b.report.subscribe(function(b){var c={};c[a]=b,i&&(c[i]="error"),t(b.message,c)});else{var c=window.onerror;window.onerror=function(b,d,e,f){var g={};g[a]={mode:"JSException",url:d,line:e,column:f},i&&(g[i]="error"),t(b,g),c&&"function"==typeof c&&c.apply(window,arguments)}}}}var d,e,f,g,h,i="severity",j=500,k=10,l=-1,m=null,n=!1,o=null,p=204800,q=function(a){d="https://api.logmatic.io/v1/input/"+a},r=function(a){d=a},s=function(a){a=a||{},null!=a.lingerMs&&(j=a.lingerMs),null!=a.maxPostCount&&(a.maxPostCount<1&&(a.maxPostCount=1),k=a.maxPostCount),null!=a.maxWaitingCount&&(l=a.maxWaitingCount),null!=a.maxContentSize&&(p=a.maxContentSize)},t=function(b,c){if(!d)return void console.error("Please init Logmatic before pushing events");var e={message:b};i&&(e[i]="info"),a(c,e),u(e)},u=function(b){a(e,b),h&&(b[h]=window.location.href),m=m||[],m.push(JSON.stringify(b)),l>=0&&m.length>l&&m.shift(),v(!0)},v=function(a){!n&&!o&&m&&m.length&&(a&&j>=0?o=setTimeout(w,j):w())},w=function(){for(var a=[],b=0,c=0;c<m.length&&k>c;c++){var e=m.shift();if(b+=e.length,b>p){if(e.length>p)break;m.unshift(e);break}a.push(e)}var h="["+a.join(",")+"]";0==m.length&&(m=null),o=null,n=!0;var i;"undefined"!=typeof XDomainRequest&&(i=new XDomainRequest),i=new XMLHttpRequest,i.open("POST",d,!0),i.constructor===XMLHttpRequest&&(i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),f&&i.setRequestHeader("X-Logmatic-Add-IP",f),g&&i.setRequestHeader("X-Logmatic-Add-UserAgent",g)),i.onload=function(){n=!1,v(!1)},i.onerror=function(){n=!1,v(!1)},i.send(h)},x=function(a){e=a},y=function(a){h=a},z=function(a){f=a},A=function(a){g=a};return{init:q,log:t,forceEndpoint:r,setMetas:x,setSendErrors:c,setSendConsoleErrors:c,setSendConsoleLogs:b,setIPTracking:z,setUserAgentTracking:A,setURLTracking:y,setBulkOptions:s}});
//# sourceMappingURL=logmatic.min.js.map