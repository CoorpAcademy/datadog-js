!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.logmatic=b()}(this,function(){function a(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function b(a){a&&(i=a),console&&[{f:"log",l:"info"},{f:"info"},{f:"trace"},{f:"warn"},{f:"error"}].forEach(function(a){var b=a.f,c=a.l||a.f,d=console[b];console[b]=function(){var a=null;i&&(a={},a[i]=c);var b=Array.prototype.slice.call(arguments).map(function(a){return"object"==typeof a?JSON.stringify(a):String(a)}).join(" ");s(b,a),d.apply?d.apply(console,arguments):d(b)}})}function c(a){if(a){var b=window.TraceKit;if(b)b.report.subscribe(function(b){var c={};c[a]=b,i&&(c[i]="error"),s(b.message,c)});else{var c=window.onerror;window.onerror=function(b,d,e,f){var g={};g[a]={mode:"JSException",url:d,line:e,column:f},i&&(g[i]="error"),s(b,g),c&&"function"==typeof c&&c.apply(window,arguments)}}}}var d,e,f,g,h,i="severity",j=500,k=10,l=-1,m=null,n=!1,o=null,p=function(a){d="https://api.logmatic.io/v1/input/"+a},q=function(a){d=a},r=function(a){a=a||{},null!=a.lingerMs&&(j=a.lingerMs),null!=a.maxPostCount&&(k=a.maxPostCount),null!=a.maxWaitingCount&&(l=a.maxWaitingCount)},s=function(b,c){if(!d)return void console.error("Please init Logmatic before pushing events");var e={message:b};i&&(e[i]="info"),a(c,e),t(e)},t=function(b){a(e,b),h&&(b[h]=window.location.href),m=m||[],m.push(JSON.stringify(b)),l>=0&&m.length>l&&m.shift(),u(!0)},u=function(a){!n&&!o&&m&&m.length&&(a&&j>=0?o=setTimeout(v,j):v())},v=function(){var a;k>0&&m.length>k?a="["+m.splice(0,k).join(",")+"]":(a=m.length>1?"["+m.join(",")+"]":m[0],m=null),o=null,n=!0;var b;"undefined"!=typeof XDomainRequest&&(b=new XDomainRequest),b=new XMLHttpRequest,b.open("POST",d,!0),b.constructor===XMLHttpRequest&&(b.setRequestHeader("Content-Type","application/json; charset=UTF-8"),f&&b.setRequestHeader("X-Logmatic-Add-IP",f),g&&b.setRequestHeader("X-Logmatic-Add-UserAgent",g)),b.onload=function(){n=!1,u(!1)},b.onerror=function(){n=!1,u(!1)},b.send(a)},w=function(a){e=a},x=function(a){h=a},y=function(a){f=a},z=function(a){g=a};return{init:p,log:s,forceEndpoint:q,setMetas:w,setSendErrors:c,setSendConsoleErrors:c,setSendConsoleLogs:b,setIPTracking:y,setUserAgentTracking:z,setURLTracking:x,setBulkOptions:r}});
//# sourceMappingURL=logmatic.min.js.map